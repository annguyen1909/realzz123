{"ast":null,"code":"import axios from 'axios';\nexport const checkImage = file => {\n  let err = \"\";\n  if (!file) return err = \"File does not exist.\";\n  if (file.size > 1024 * 1024) // 1mb\n    err = \"The largest image size is 1mb.\";\n  if (file.type !== 'image/jpeg' && file.type !== 'image/png') err = \"Image format is incorrect.\";\n  return err;\n};\nexport const imageUpload = async (images, token) => {\n  let imgArr = [];\n\n  for (const item of images) {\n    const formData = new FormData();\n\n    if (item.camera) {\n      formData.append(\"file\", item.camera);\n    } else {\n      formData.append(\"file\", item);\n    }\n\n    const res = await axios.post('/api/upload', formData, {\n      headers: {\n        'content-type': 'multipart/form-data',\n        Authorization: token\n      }\n    }); // console.log(res)\n\n    imgArr.push({\n      public_id: res.public_id,\n      url: res.url\n    });\n  }\n\n  return imgArr;\n};","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/University/I.T/Year 1/Software Engineering Project Management/Project/real/client/src/utils/imgUpload.js"],"names":["axios","checkImage","file","err","size","type","imageUpload","images","token","imgArr","item","formData","FormData","camera","append","res","post","headers","Authorization","push","public_id","url"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,UAAU,GAAIC,IAAD,IAAU;AAChC,MAAIC,GAAG,GAAG,EAAV;AACA,MAAG,CAACD,IAAJ,EAAU,OAAOC,GAAG,GAAG,sBAAb;AAEV,MAAGD,IAAI,CAACE,IAAL,GAAY,OAAO,IAAtB,EAA4B;AAC5BD,IAAAA,GAAG,GAAG,gCAAN;AAEA,MAAGD,IAAI,CAACG,IAAL,KAAc,YAAd,IAA8BH,IAAI,CAACG,IAAL,KAAc,WAA/C,EACAF,GAAG,GAAG,4BAAN;AAEA,SAAOA,GAAP;AACH,CAXM;AAaP,OAAO,MAAMG,WAAW,GAAG,OAAMC,MAAN,EAAcC,KAAd,KAAwB;AAE/C,MAAIC,MAAM,GAAG,EAAb;;AACA,OAAK,MAAMC,IAAX,IAAmBH,MAAnB,EAA4B;AACxB,UAAMI,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;AAEA,QAAGF,IAAI,CAACG,MAAR,EAAe;AACXF,MAAAA,QAAQ,CAACG,MAAT,CAAgB,MAAhB,EAAwBJ,IAAI,CAACG,MAA7B;AACH,KAFD,MAEM;AACFF,MAAAA,QAAQ,CAACG,MAAT,CAAgB,MAAhB,EAAwBJ,IAAxB;AACH;;AAED,UAAMK,GAAG,GAAG,MAAMf,KAAK,CAACgB,IAAN,CAAW,aAAX,EAA0BL,QAA1B,EAAoC;AAClDM,MAAAA,OAAO,EAAE;AAAC,wBAAgB,qBAAjB;AAAwCC,QAAAA,aAAa,EAAEV;AAAvD;AADyC,KAApC,CAAlB,CATwB,CAaxB;;AACAC,IAAAA,MAAM,CAACU,IAAP,CAAY;AAACC,MAAAA,SAAS,EAAEL,GAAG,CAACK,SAAhB;AAA2BC,MAAAA,GAAG,EAAEN,GAAG,CAACM;AAApC,KAAZ;AAEH;;AACD,SAAOZ,MAAP;AACH,CArBM","sourcesContent":["import axios from 'axios'\r\n\r\nexport const checkImage = (file) => {\r\n    let err = \"\"\r\n    if(!file) return err = \"File does not exist.\"\r\n\r\n    if(file.size > 1024 * 1024) // 1mb\r\n    err = \"The largest image size is 1mb.\"\r\n\r\n    if(file.type !== 'image/jpeg' && file.type !== 'image/png' )\r\n    err = \"Image format is incorrect.\"\r\n    \r\n    return err;\r\n}\r\n\r\nexport const imageUpload = async(images, token) => {\r\n   \r\n    let imgArr = [];\r\n    for (const item of images)  {\r\n        const formData = new FormData()\r\n\r\n        if(item.camera){\r\n            formData.append(\"file\", item.camera)\r\n        }else {\r\n            formData.append(\"file\", item)\r\n        }\r\n        \r\n        const res = await axios.post('/api/upload', formData, {\r\n            headers: {'content-type': 'multipart/form-data', Authorization: token}\r\n        })\r\n\r\n        // console.log(res)\r\n        imgArr.push({public_id: res.public_id, url: res.url})\r\n        \r\n    }\r\n    return imgArr;\r\n}"]},"metadata":{},"sourceType":"module"}